# Jupyter 101 для курса «Инженерия Искусственного Интеллекта»

Этот файл — короткий гайд по Jupyter-ноутбукам **под задачи курса**:

- как запускать Jupyter в своём репозитории;
- как работать с kernel’ами и окружением;
- как организовывать ноутбуки в `homeworks/` и `project/`;
- как сделать ноутбук «проверяемым» (`Restart & Run All` без сюрпризов).

---

## 1. Что такое Jupyter-ноутбук

Jupyter Notebook — это:

- интерактивная среда для Python;
- файл с расширением `.ipynb`, который содержит:
  - ячейки кода;
  - текстовые блоки (Markdown);
  - результаты выполнения (графики, таблицы и т.п.).

На курсе ноутбуки используются:

- на семинарах (демо-код, `SNN-demo.ipynb`);
- в домашних заданиях (`homeworks/HWNN/*.ipynb`);
- в проекте (`project/notebooks/*.ipynb`).

---

## 2. Установка и запуск Jupyter

### 2.1. Установка

В активированном виртуальном окружении (`.venv`) в корне репозитория:

```bash
pip install jupyter
# при желании
pip install jupyterlab
```

### 2.2. Запуск Jupyter Notebook

В корне репозитория:

```bash
jupyter notebook
```

Откроется браузер с интерфейсом Jupyter:

- в левой части — список файлов/папок;
- можно переходить в `homeworks/HWNN/` или `project/notebooks/` и создавать/открывать ноутбуки.

### 2.3. Запуск JupyterLab (опционально)

```bash
jupyter lab
```

Более современный интерфейс, но по сути делает то же самое.

Важно: **запускать из корня проекта**, чтобы относительные пути к данным и модулям работали ожидаемо.

---

## 3. Kernel и виртуальное окружение

### 3.1. Что такое kernel

Kernel — это «процесс Python», который выполняет код в ноутбуке.

Важно, чтобы:

- ноутбук использовал **тот же Python и те же пакеты**, что и твой проект (т.е. `.venv`).

### 3.2. Привязка Jupyter к venv

В активированном venv:

```bash
python -m ipykernel install --user --name aie-venv --display-name "Python (aie-venv)"
```

После этого в Jupyter в меню `Kernel → Change kernel` появится вариант `Python (aie-venv)`.

Выбирай **его** для ноутбуков по курсу.

Если ты менял venv или переустанавливал пакеты — убедись, что:

- активировал нужный venv;
- при необходимости переинициализировал kernel.

---

## 4. Базовая работа с ноутбуками

### 4.1. Ячейки кода

- пишешь код → `Shift+Enter` (выполнить и перейти к следующей ячейке);
- `Ctrl+Enter` (или `⌘+Enter` на macOS) — выполнить ячейку без перехода.

Примеры:

```python
import numpy as np
import pandas as pd

x = np.arange(10)
x
```

### 4.2. Ячейки Markdown

Используются для:

- заголовков;
- пояснений;
- формул/списков.

Пример:

```markdown
## Шаг 1. Загрузка данных

Здесь мы загружаем исходный CSV-файл и смотрим первые строки.
```

Меняем тип ячейки в меню наверху (Code → Markdown) или сочетанием клавиш (например, `M` в командном режиме).

### 4.3. Командный и редактирующий режим

- **Edit mode** (зелёная рамка): работа с текстом ячейки.
- **Command mode** (синяя рамка): операции над ячейками (создать, удалить, переместить).

Полезные hotkeys (когда ты в командном режиме):

- `A` — вставить ячейку **над** текущей;
- `B` — вставить ячейку **под** текущей;
- `D` затем `D` — удалить ячейку;
- `M` — сделать ячейку Markdown;
- `Y` — сделать ячейку с кодом.

---

## 5. Куда класть ноутбуки в репозитории

### 5.1. Домашние задания (`homeworks/`)

Для домашки `HWNN`:

```text
homeworks/
  HWNN/
    HWNN-task.ipynb
    (доп. файлы/модули по заданию)
```

Название ноутбука можно сделать говорящим, например:

- `HW01-basics.ipynb`;
- `HW03-ml-metrics.ipynb`.

Главное — чтобы:

- было понятно, **к какой домашке** относится ноутбук;
- структура соответствовала `SNN-homework.md`.

### 5.2. Проект (`project/notebooks/`)

Рекомендуется разделять ноутбуки по задачам:

```text
project/
  notebooks/
    01_eda.ipynb
    02_baseline_models.ipynb
    03_experiments_tuning.ipynb
    04_error_analysis.ipynb
```

Нумерация (`01_`, `02_` …) помогает задавать порядок.

---

## 6. «Restart & Run All» как критерий качества ноутбука

Перед сдачей домашки или этапа проекта:

1. В меню Jupyter:

   - `Kernel → Restart & Run All`.
2. Смотри, чтобы:

   - ноутбук выполнился **без ошибок**;
   - все шаги воспроизводились в правильном порядке;
   - не было скрытых зависимостей (например, на файлы/переменные, созданные вне ноутбука).

Если что-то падает:

- исправляешь код/пути;
- снова `Restart & Run All` до зелёного прохождения.

Это важный критерий для проверяющего: он должен иметь возможность:

- сделать `Run All`;
- получить те же графики/таблицы, что и ты.

---

## 7. Работа с данными и путями внутри ноутбука

### 7.1. Относительные пути

Не завязывайся на абсолютные пути вроде:

```python
df = pd.read_csv("C:\\Users\\Имя\\Desktop\\data.csv")
```

Лучше:

```python
from pathlib import Path

PROJECT_ROOT = Path().resolve().parent.parent  # зависит от того, где лежит ноутбук
DATA_DIR = PROJECT_ROOT / "project" / "data"

df = pd.read_csv(DATA_DIR / "train.csv")
```

Или проще, если ноутбук лежит в `project/notebooks/`:

```python
from pathlib import Path

NOTEBOOK_DIR = Path().resolve()
PROJECT_DIR = NOTEBOOK_DIR.parent
DATA_DIR = PROJECT_DIR / "data"

df = pd.read_csv(DATA_DIR / "train.csv")
```

### 7.2. Размер данных

- Не тащи в ноутбук «сырые гигабайты» без необходимости.
- Если датасет большой:

  - делай подвыборку для экспериментов;
  - или используй генераторы/батчи.

---

## 8. Ноутбуки и Git: хорошие практики

### 8.1. Размер и «мусор»

- По возможности **чисти выводы**, если они огромные (гигантские таблицы, массивы).
- Огромные бинарные артефакты и картинки лучше сохранять в файлы, а в ноутбуке показывать превью.

### 8.2. Конфликты в .ipynb

Ноутбук — это JSON. Конфликты при merge выглядят некрасиво.

Чтобы уменьшить шанс конфликтов:

- не правь один и тот же ноутбук на нескольких машинах одновременно без `git pull`;
- если нужно, для сложной логики вынеси код в `.py`-модули (`project/src/`), а в ноутбуке только импортируй функции.

---

## 9. Когда лучше вынести код из ноутбука в .py

Сигналы, что пора выносить:

- в ноутбуке много повторяющегося кода (копипаста между ячейками);
- есть чёткая логика (загрузка данных, обучение, предсказание), которую хочется переиспользовать;
- ты начинаешь вызывать одну и ту же функцию из разных ноутбуков/скриптов.

Пример:

`project/src/models/train.py`:

```python
def train_model(df, config):
    # тренировка модели
    ...
    return model
```

Ноутбук:

```python
from project.src.models.train import train_model

model = train_model(df, config)
```

Так проще:

- тестировать код;
- переиспользовать его в API-сервисе;
- сохранять ноутбук компактным и читабельным.

---

## 10. Мини-чеклист перед сдачей ноутбука

Перед тем как считать ноутбук «готовым»:

1. **Структура:**

   - ноутбук лежит в правильной папке (`homeworks/HWNN/` или `project/notebooks/`);
   - имя файла понятно и связано с заданием.

2. **Kernel:**

   - используется правильный kernel (например, `Python (aie-venv)`).

3. **Код:**

   - нет «мёртвых» ячеек, которые не выполняются;
   - нет сильной копипасты там, где можно сделать функцию.

4. **Воспроизводимость:**

   - `Kernel → Restart & Run All` проходит без ошибок;
   - все пути к данным относительные и работают из репозитория.

5. **Выводы:**

   - в ноутбуке видны ключевые результаты:

     - метрики;
     - графики;
     - выводы в Markdown-ячейках (что получилось и почему).

6. **Git:**

   - изменения закоммичены;
   - на GitHub в нужной ветке видна актуальная версия `.ipynb`.

С такой дисциплиной ноутбуки перестают быть «одноразовыми» и становятся полноценной частью инженерного проекта, а не просто «песочницей для экспериментов».

---
