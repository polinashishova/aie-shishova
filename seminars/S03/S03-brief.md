# Семинар 03 – Мини-приложение на Python: CLI, структура проекта и EDA

## 1. Место в курсе

Третий семинар курса «Инженерия Искусственного Интеллекта».

Опирается на материалы Лекций L01-L02 (рамка курса, жизненный цикл ИИ-систем, требования к данным), результаты Семинара S01 (настроенная dev-среда, Git, репозиторий по шаблону `aie-student-template`) и Семинара S02 (Pandas, базовый EDA и визуализация).  

Это первый семинар, где учащиеся переходят от «разрозненных ноутбуков» к **инженерному Python-проекту**:

- знакомятся с базовыми элементами packaging (`pyproject.toml`, `src/`-layout, пакет и модуль);
- учатся пользоваться инструментом `uv` для управления окружением, зависимостями и запуском;
- видят, как из кода на Pandas/Matplotlib собрать маленькое CLI-приложение для EDA.

Домашнее задание по семинару – **HW03**, его формальное описание дано в файле `seminars/S03/S03-homework.md`.

---

## 2. Цели семинара

После семинара и выполнения домашнего задания студент:

- понимает базовую структуру «взрослого» Python-проекта:
  - `pyproject.toml` как «паспорт» проекта;
  - layout `src/` и пакет `eda_cli`;
  - разделение на модули `core` (логика), `viz` (графики) и `cli` (интерфейс);
- умеет использовать `uv` для:
  - установки зависимостей и подготовки окружения (`uv sync`);
  - запуска CLI-команд и тестов внутри проекта (`uv run …`);
- видит, как типичный EDA-код на Pandas и Matplotlib оформляется в виде функций и переиспользуемых модулей;
- может запустить мини-приложение `eda-cli`, генерирующее EDA-отчёт по CSV-файлу;
- понимает, как добавить простые эвристики качества данных и параметры в CLI-команду отчёта.

---

## 3. Краткое содержание

1. **Вступление и связь с предыдущими семинарами**
   - напоминание, что на S02 EDA делался в ноутбуке;
   - постановка задачи: оформить EDA в виде отдельного инструмента (`eda-cli`), который можно запускать на любых CSV.

2. **Краткий мостик: от `venv + pip + requirements.txt` к `uv + pyproject.toml`**
   - повторение знакомого сценария: виртуальное окружение, установка зависимостей, запуск скрипта;
   - мотивация перехода к `uv`: одна команда вместо нескольких, единый файл конфигурации;
   - мини-демо на небольшом проекте: `uv init`, `uv add`, `uv run`.

3. **Обзор структуры проекта `eda-cli`**
   - дерево каталогов: `pyproject.toml`, `src/eda_cli/`, `tests/`, `data/`;
   - назначение `pyproject.toml`: имя проекта, зависимости, точка входа `eda-cli = "eda_cli.cli:main"`;
   - обсуждение `src/`-layout и того, почему пакет лучше, чем одиночный скрипт;
   - файл `data/example.csv` как учебный датасет для EDA.

4. **Модуль `core.py`: логика EDA и эвристики качества**
   - структуры `ColumnSummary` и `DatasetSummary` (dataclass как удобный способ описания данных);
   - функции:
     - `summarize_dataset` – обзор по колонкам (типы, пропуски, уникальные значения, базовая статистика);
     - `missing_table` – таблица пропусков по столбцам;
     - `correlation_matrix` – корреляция числовых признаков;
     - `top_categories` – топ значений для категориальных столбцов;
     - `compute_quality_flags` – простые эвристики качества данных и интегральный `quality_score`;
   - превращение результатов в табличную форму для печати и сохранения.

5. **Модуль `viz.py`: визуализация EDA**
   - гистограммы по числовым колонкам;
   - визуализация пропусков в виде «матрицы»;
   - тепловая карта корреляции;
   - сохранение графиков в PNG-файлы для включения в отчёты.

6. **Модуль `cli.py`: CLI-интерфейс на Typer**
   - приложение `typer.Typer()` и команды:
     - `overview` – краткий текстовый обзор набора данных;
     - `report` – полный EDA-отчёт в папку (`report.md`, CSV-файлы, изображения);
   - чтение CSV, обработка ошибок, параметры команд (разделитель, кодировка, каталог отчёта);
   - первая демонстрация запуска:
     - `uv run eda-cli overview data/example.csv`;
     - `uv run eda-cli report data/example.csv --out-dir reports_example`.

7. **Тесты и минимальный контроль качества**
   - обзор файла `tests/test_core.py`;
   - пример простого теста для `summarize_dataset`, `missing_table`, `top_categories`;
   - запуск тестов через `uv run pytest -q`.

8. **Постановка домашнего задания HW03**
   - пояснение, что HW03 фокусируется на «инженерной» части:
     - расширение эвристик качества данных;
     - параметризация отчёта через новые опции CLI;
     - добавление простых тестов;
   - обсуждение того, какие дополнительные фичи в `eda-cli` приветствуются (новые команды, JSON-сводки, новые графики).

---

## 4. Формат проведения

Семинар проводится в формате, согласованном с общей политикой по семинарам:

- **Краткий разбор**:
  - напоминание связи с S01-S02 и лекционными материалами;
  - обсуждение мотивации перехода к пакетам и CLI-утилитам.

- **Практическая часть (live-coding + демонстрация проекта)**:
  - показ работы `uv` на небольшом демо-проекте;
  - разбор структуры `eda-cli` и ключевых файлов;
  - демонстрация команд `uv sync`, `uv run eda-cli overview …`, `uv run eda-cli report …`;
  - по шагам разбор модулей `core.py`, `viz.py`, `cli.py` и части тестов;
  - небольшие правки кода в реальном времени (расширение эвристик, добавление параметров).

- **Постановка домашнего задания HW03**:
  - обсуждение ожидаемой структуры `homeworks/HW03/` в студенческом репозитории;
  - пояснение, какие изменения в `eda-cli` нужно реализовать самостоятельно;
  - ответы на технические вопросы по `uv`, структуре проекта, Typer и тестам.

---

## 5. Результат для студента

К концу семинара студент:

- понимает, чем «инженерный» Python-проект отличается от одиночных ноутбуков и скриптов;
- видит пример реального мини-проекта `eda-cli`, который:
  - упакован как пакет с `pyproject.toml`,
  - использует `src/`-layout и модульную структуру;
- умеет:
  - запустить `uv sync` для подготовки окружения;
  - выполнить `uv run eda-cli overview …` и `uv run eda-cli report …` для учебного датасета;
  - прочитать и интерпретировать сгенерированный EDA-отчёт.

После выполнения домашнего задания HW03 у студента:

- в репозитории есть папка `homeworks/HW03/` с копией проекта `eda-cli` и внесёнными изменениями;
- реализованы дополнительные эвристики качества данных и параметры CLI-команды отчёта;
- добавлены как минимум простые тесты, проверяющие новые функции;
- проект успешно собирается и запускается в стандартном окружении курса через `uv run …`.
